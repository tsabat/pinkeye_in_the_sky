<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	
	<title>Wufoo Worldview</title>

	<link rel="stylesheet" href="style.css">
</head>

<body>
	
  <div id="map_canvas"></div>

	<aside>
		<h1 id="logo">Wufoo Worldview</h1>
		
		<p>This map shows the locations of users who are submitting Wufoo forms in near-real time.</p>
	</aside>

	<script src="http://maps.googleapis.com/maps/api/js?sensor=true"></script>
	<script>
		                                      /* Center of world */
	    var latlng = new google.maps.LatLng(40.97989806962013, -31.640625);
	    var myOptions = {
	      zoom: 2,
	      center: latlng,
	      
	      /* Scroll but not zoom */
				scrollwheel: false,
				disableDoubleClickZoom: true,
				zoomControl: false,
				
	      mapTypeId: google.maps.MapTypeId.ROADMAP
	    };
	    var map = new google.maps.Map(document.getElementById("map_canvas"),
	        myOptions);

	</script>
	
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
	<script>
	
		function addOneMarker(lat, lng) {
			pointToMoveTo = new google.maps.LatLng(lat, lng);
		  // map.panTo(pointToMoveTo);
		  curMarker = new google.maps.Marker({
		      position: pointToMoveTo,
					// So fresh copy of GIF each time
				  icon: "Bleep.gif?random=" + lat + lng,
				  // Required for animation
			    optimized: false,
		      map: map
		  });
		}
	
		$.getJSON('spec.json', function(data) {
			for (i=0; i<100000; i++) {
				if (data.coordinates[i]) {
					setTimeout(addOneMarker, i*2000, data.coordinates[i].latitude, data.coordinates[i].longitude);
				} else {
					break;
				}
			};
		});
	</script>

</body>

</html>